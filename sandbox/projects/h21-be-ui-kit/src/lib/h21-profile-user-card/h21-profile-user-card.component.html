<mat-card class="c-h21-profile-user-card">
	<div class="c-h21-profile-user-card_header">
		<mat-card-title class="c-h21-profile-user-card_title">Banan Ananovich</mat-card-title>
		<mat-card-header>
			<img mat-card-avatar src="" alt=""/>
			<div class="c-h21-profile-user-card_meta-data-box">
				<div class="row">
					<div class="col-12 col-xl-6">
						<div class="row no-gutters c-h21-profile-user-card_meta-data-item">
							<div class="col-6">Date of registration</div>
							<div class="col-6"><b>15.03.2018 14:56:17</b></div>
						</div>
					</div>
					<div class="col-12 col-xl-6">
						<div class="row no-gutters c-h21-profile-user-card_meta-data-item">
							<div class="col-6 col-xl-4">Identity user ID:</div>
							<div class="col-6 col-xl-8"><b>6893922f-0ee8-4b1c-b7b3</b></div>
						</div>
					</div>
					<div class="col-12 col-xl-6">
						<div class="row no-gutters c-h21-profile-user-card_meta-data-item">
							<div class="col-6">Date of update</div>
							<div class="col-6"><b>15:03:2018 15:58:19</b></div>
						</div>
					</div>
					<div class="col-12 col-xl-6">
						<div class="row no-gutters c-h21-profile-user-card_meta-data-item">
							<div class="col-6 col-xl-4">Status</div>
							<div class="col-6 col-xl-8"><b>Active</b></div>
						</div>
					</div>
				</div>
			</div>
		</mat-card-header>
	</div>
	<mat-card-content>
		<mat-tab-group>

			<!-- General info tab -->
			<mat-tab label="General info">
				<h4 class="c-h21-profile-user-card_title">General info</h4>
				<div class="row">
					<div class="col-6">
						<mat-form-field class="c-h21-profile-user-card_form-field" [class.__is-readonly]="!editable">
							<input matInput placeholder="Email" [readonly]="!editable" [formControl]="emailControl">
							<span matSuffix class="c-h21-profile-user-card_required" *ngIf="!emailControl.invalid">*</span>
							<mat-icon matSuffix *ngIf="emailControl.invalid" color="warn">error</mat-icon>
							<mat-error *ngIf="emailControl.invalid">{{getErrorMessage(emailControl)}}</mat-error>
						</mat-form-field>
						<mat-form-field class="c-h21-profile-user-card_form-field" [class.__is-readonly]="!editable">
							<input matInput placeholder="First name" [readonly]="!editable" [formControl]="firstNameControl">
							<span matSuffix class="c-h21-profile-user-card_required" *ngIf="!firstNameControl.invalid">*</span>
							<mat-icon matSuffix *ngIf="firstNameControl.invalid" color="warn">error</mat-icon>
							<mat-error *ngIf="firstNameControl.invalid">{{getErrorMessage(firstNameControl)}}</mat-error>
						</mat-form-field>
						<mat-form-field class="c-h21-profile-user-card_form-field" [class.__is-readonly]="!editable">
							<input matInput placeholder="Last name" [readonly]="!editable" [formControl]="lastNameControl">
							<span matSuffix class="c-h21-profile-user-card_required" *ngIf="!lastNameControl.invalid">*</span>
							<mat-icon matSuffix *ngIf="lastNameControl.invalid" color="warn">error</mat-icon>
							<mat-error *ngIf="lastNameControl.invalid">{{getErrorMessage(lastNameControl)}}</mat-error>
						</mat-form-field>
						<mat-form-field class="c-h21-profile-user-card_form-field" [class.__is-readonly]="!editable">
							<input matInput placeholder="Middle name" [readonly]="!editable" [value]="'Ananovich'">
						</mat-form-field>
						<mat-form-field class="c-h21-profile-user-card_form-field" [class.__is-readonly]="!editable">
							<mat-select placeholder="Gender" [disabled]="!editable" value="m">
								<mat-option value="m">Male</mat-option>
								<mat-option value="f">Female</mat-option>
							</mat-select>
						</mat-form-field>
						<mat-form-field class="c-h21-profile-user-card_form-field" [class.__is-readonly]="!editable">
							<input matInput placeholder="Birth day" [matDatepicker]="picker" [readonly]="!editable" value="'01/01/1980'">
							<mat-datepicker-toggle matSuffix [for]="picker" class="c-h21-profile-user-card_datepicker-icon" [disabled]="!editable"></mat-datepicker-toggle>
							<mat-datepicker #picker></mat-datepicker>
						</mat-form-field>
					</div>
					<div class="col-6">
						<mat-form-field class="c-h21-profile-user-card_form-field" [class.__is-readonly]="!editable">
							<input matInput placeholder="Country" [readonly]="!editable" [formControl]="countryControl" [matAutocomplete]="countries">
							<mat-autocomplete #countries="matAutocomplete">
								<mat-option *ngFor="let country of countriesData" [value]="country.name">
									{{country.name}}
								</mat-option>
							</mat-autocomplete>
						</mat-form-field>
						<mat-form-field class="c-h21-profile-user-card_form-field" [class.__is-readonly]="!editable">
							<input matInput placeholder="City" [readonly]="!editable" [formControl]="cityControl" [matAutocomplete]="cities">
							<mat-autocomplete #cities="matAutocomplete">
								<mat-option *ngFor="let city of citiesData" [value]="city.name">
									{{city.name}}
								</mat-option>
							</mat-autocomplete>
						</mat-form-field>
						<mat-form-field class="c-h21-profile-user-card_form-field" [class.__is-readonly]="!editable">
							<input matInput placeholder="Code" [readonly]="!editable" [formControl]="codeControl" [matAutocomplete]="codes">
							<mat-autocomplete #codes="matAutocomplete">
								<mat-option *ngFor="let code of codesData" [value]="code.code">
									{{code.code}}
								</mat-option>
							</mat-autocomplete>
						</mat-form-field>
						<mat-form-field class="c-h21-profile-user-card_form-field" [class.__is-readonly]="!editable">
							<input matInput placeholder="Phone" [readonly]="!editable" [value]="'+7 999 999-99-99'">
						</mat-form-field>
						<mat-form-field class="c-h21-profile-user-card_form-field" [class.__is-readonly]="!editable">
							<mat-select placeholder="Language" [disabled]="!editable" [value]="'rus'">
								<mat-option [value]="'eng'">English</mat-option>
								<mat-option [value]="'fra'">French</mat-option>
								<mat-option [value]="'deu'">German</mat-option>
								<mat-option [value]="'rus'">Russian</mat-option>
							</mat-select>
						</mat-form-field>
						<mat-form-field class="c-h21-profile-user-card_form-field" [class.__is-readonly]="!editable">
							<input matInput placeholder="More information" [readonly]="!editable">
						</mat-form-field>
					</div>
				</div>
				<div *ngIf="editable" class="c-h21-profile-user-card_action-buttons">
					<button mat-stroked-button color="primary">Cancel</button>
					<button mat-raised-button color="primary">Save</button>
				</div>
			</mat-tab>

			<!-- Roles tab -->
			<mat-tab label="Roles">
				<h4 class="c-h21-profile-user-card_title">Roles</h4>
				<div class="row">
					<div class="col-6">
						<mat-slide-toggle class="c-h21-profile-user-card_slide-toggle"
								color="accent"
								[labelPosition]="'before'"
								[checked]="true"
								[disabled]="!editable">
							market
						</mat-slide-toggle>
					</div>
					<div class="col-6">
						<mat-slide-toggle class="c-h21-profile-user-card_slide-toggle"
										  color="accent"
										  [labelPosition]="'before'"
										  [checked]="true"
										  [disabled]="!editable">
							market
						</mat-slide-toggle>
					</div>
					<div class="col-6">
						<mat-slide-toggle class="c-h21-profile-user-card_slide-toggle"
										  color="accent"
										  [labelPosition]="'before'"
										  [checked]="true"
										  [disabled]="!editable">
							disk
						</mat-slide-toggle>
					</div>
					<div class="col-6">
						<mat-slide-toggle class="c-h21-profile-user-card_slide-toggle"
										  color="accent"
										  [labelPosition]="'before'"
										  [checked]="true"
										  [disabled]="!editable">
							disk
						</mat-slide-toggle>
					</div>
					<div class="col-6">
						<mat-slide-toggle class="c-h21-profile-user-card_slide-toggle"
										  color="accent"
										  [labelPosition]="'before'"
										  [checked]="false"
										  [disabled]="!editable">
							admin
						</mat-slide-toggle>
					</div>
					<div class="col-6">
						<mat-slide-toggle class="c-h21-profile-user-card_slide-toggle"
										  color="accent"
										  [labelPosition]="'before'"
										  [checked]="false"
										  [disabled]="!editable">
							admin
						</mat-slide-toggle>
					</div>
					<div class="col-6">
						<mat-slide-toggle class="c-h21-profile-user-card_slide-toggle"
										  color="accent"
										  [labelPosition]="'before'"
										  [checked]="false"
										  [disabled]="!editable">
							travelportAgencyManager
						</mat-slide-toggle>
					</div>
					<div class="col-6">
						<mat-slide-toggle class="c-h21-profile-user-card_slide-toggle"
										  color="accent"
										  [labelPosition]="'before'"
										  [checked]="false"
										  [disabled]="!editable">
							travelportAgencyManager
						</mat-slide-toggle>
					</div>
				</div>
			</mat-tab>

			<!-- Claims tab -->
			<mat-tab label="Claims">
				<h4 class="c-h21-profile-user-card_title">Claims</h4>
				<table mat-table [dataSource]="claimsData" class="profile-table">
					<!-- Type Column -->
					<ng-container matColumnDef="type">
						<th mat-header-cell *matHeaderCellDef [width]="'50%'">Type</th>
						<td mat-cell *matCellDef="let element"> {{element.type}} </td>
					</ng-container>
					<!-- Value Column -->
					<ng-container matColumnDef="value">
						<th mat-header-cell *matHeaderCellDef [width]="'50%'">Value</th>
						<td mat-cell *matCellDef="let element"> {{element.value}} </td>
					</ng-container>
					<tr mat-header-row *matHeaderRowDef="claimsDisplayedColumns"></tr>
					<tr mat-row *matRowDef="let row; columns: claimsDisplayedColumns;"></tr>
				</table>
			</mat-tab>

			<!-- Special folders tab -->
			<mat-tab label="Special folders">
				<div class="row no-gutters">
					<div class="col-6">
						<h4 class="c-h21-profile-user-card_title mb-0">Special folders</h4>
					</div>
					<div class="col-6 __text-right">
						<button mat-raised-button color="primary" (click)="addNewFolderRow()" *ngIf="editable">Add new row</button>
					</div>
				</div>
				<table mat-table [dataSource]="foldersData" class="profile-table">
					<!-- Name Column -->
					<ng-container matColumnDef="name">
						<th mat-header-cell *matHeaderCellDef [width]="'48%'">Name</th>
						<td mat-cell *matCellDef="let element"> {{element.name}} </td>
					</ng-container>
					<!-- Permission Column -->
					<ng-container matColumnDef="permission">
						<th mat-header-cell *matHeaderCellDef [width]="'48%'">Permission</th>
						<td mat-cell *matCellDef="let element"> {{element.permission}} </td>
					</ng-container>
					<!-- Remove Column -->
					<ng-container matColumnDef="remove">
						<th mat-header-cell *matHeaderCellDef [width]="'4%'">&nbsp;</th>
						<td mat-cell *matCellDef="let element">
							<button mat-icon-button class="profile-table_removed-row-button" (click)="removeFolderRow(element.id);" [disabled]="!editable">
								<mat-icon>delete</mat-icon>
							</button>
						</td>
					</ng-container>
					<tr mat-header-row *matHeaderRowDef="foldersDisplayedColumns"></tr>
					<tr mat-row *matRowDef="let row; columns: foldersDisplayedColumns;" class="profile-table_removed-row"></tr>
				</table>
			</mat-tab>
			<mat-tab label="History">
				<h4 class="c-h21-profile-user-card_title">History</h4>
				<table mat-table [dataSource]="historyData" class="profile-table" multiTemplateDataRows>
					<!-- Expand button Column -->
					<ng-container matColumnDef="expand">
						<th mat-header-cell *matHeaderCellDef [width]="'4%'">&nbsp;</th>
						<td mat-cell *matCellDef="let element" class="profile-table_no-padding">
							<button class="profile-table_expand-button" mat-icon-button (click)="historyExpandedElement = element" *ngIf="historyExpandedElement != element">
								<mat-icon>chevron_right</mat-icon>
							</button>
							<button class="profile-table_expand-button" mat-icon-button (click)="historyExpandedElement = null" *ngIf="historyExpandedElement == element">
								<mat-icon>expand_more</mat-icon>
							</button>
						</td>
					</ng-container>
					<!-- Date Column -->
					<ng-container matColumnDef="date">
						<th mat-header-cell *matHeaderCellDef [width]="'32%'">Date</th>
						<td mat-cell *matCellDef="let element"> {{element.date | date: 'MM.dd.yyyy HH:mm'}} </td>
					</ng-container>
					<!-- Action Column -->
					<ng-container matColumnDef="action">
						<th mat-header-cell *matHeaderCellDef [width]="'32%'">Action</th>
						<td mat-cell *matCellDef="let element"> {{element.action}} </td>
					</ng-container>
					<!-- User Column -->
					<ng-container matColumnDef="user">
						<th mat-header-cell *matHeaderCellDef [width]="'32%'">User</th>
						<td mat-cell *matCellDef="let element"> {{element.user}} </td>
					</ng-container>
					<!-- Expanded Content-->
					<ng-container matColumnDef="expandedDetail">
						<td mat-cell *matCellDef="let element" [attr.colspan]="historyDisplayedColumns.length" class="profile-table_no-padding">
							<div class="expanded-detail" [class.expanded-detail__active]="historyExpandedElement === element">
								<table mat-table [dataSource]="element.expandData" class="profile-table profile-table__expanded-table">
									<ng-container matColumnDef="blank">
										<th mat-header-cell *matHeaderCellDef [width]="'4%'">&nbsp;</th>
										<td mat-cell *matCellDef>&nbsp;</td>
									</ng-container>
									<ng-container matColumnDef="field">
										<th mat-header-cell *matHeaderCellDef [width]="'32%'">Field</th>
										<td mat-cell *matCellDef="let expElement"> {{expElement.field}} </td>
									</ng-container>
									<ng-container matColumnDef="oldValue">
										<th mat-header-cell *matHeaderCellDef [width]="'32%'">oldValue</th>
										<td mat-cell *matCellDef="let expElement" class="__text-strike"> {{expElement.oldValue}} </td>
									</ng-container>
									<ng-container matColumnDef="newValue">
										<th mat-header-cell *matHeaderCellDef [width]="'32%'">newValue</th>
										<td mat-cell *matCellDef="let expElement"> {{expElement.newValue}} </td>
									</ng-container>

									<tr mat-header-row *matHeaderRowDef="historyExpandDisplayedColumns"></tr>
									<tr mat-row *matRowDef="let expElement; columns: historyExpandDisplayedColumns;"></tr>
								</table>
							</div>
						</td>
					</ng-container>
					<tr mat-header-row *matHeaderRowDef="historyDisplayedColumns"></tr>
					<tr mat-row *matRowDef="let element; columns: historyDisplayedColumns;" [class.profile-table_expanded-row]="historyExpandedElement === element"></tr>
					<tr mat-row *matRowDef="let element; columns: ['expandedDetail']" class="profile-table_expanded-row-detail"></tr>
				</table>
			</mat-tab>
		</mat-tab-group>
	</mat-card-content>
</mat-card>
